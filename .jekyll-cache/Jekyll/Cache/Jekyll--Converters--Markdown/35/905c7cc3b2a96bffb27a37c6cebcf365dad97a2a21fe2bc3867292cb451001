I"F<!-- Description Guidelines

Please note:
Use the full links to reference other files or images! Relative links will not work under our theme settings settings.
-->

<!-- please choose the appropriate batch and delete/comment the others  -->
<p><img src="https://img.shields.io/badge/Status-Production-brightgreen.svg" alt="prod" /></p>

<h1 id="meta-data-repository-"><strong>Meta Data Repository</strong> <!-- make sure spelling is consistent with other sources and within this document --></h1>

<h2 id="introduction">Introduction</h2>

<!-- 2 sentences: what does it do and how -->
<p>The Meta Data Repository is responsible for storing domains and their master data models. The models stored within this service are consulted for different tasks such as data validation. The meta models are also used by the transformer to map the incoming data onto the Open Integration Hub standard.</p>

<p><a href="http://metadata.openintegrationhub.com/api-docs/" class="btn fs-5 mb-4 mb-md-0">API Reference</a>
<a href="https://github.com/openintegrationhub/openintegrationhub/tree/master/services/meta-data-repository" class="btn fs-5 mb-4 mb-md-0">Implementation</a>
<a href="https://github.com/openintegrationhub/openintegrationhub/tree/master/services/meta-data-repository#event-controller" class="btn fs-5 mb-4 mb-md-0">Event Controller</a>
<!--[Service File](){: .btn .fs-5 .mb-4 .mb-md-0 }--></p>

<h2 id="technologies-used">Technologies used</h2>
<!-- please name and elaborate on other technologies or standards the service uses -->
<ul>
  <li><a href="https://nodejs.org">Node.js</a></li>
  <li><a href="https://www.mongodb.com">MongoDB</a></li>
  <li><a href="https://json-schema.org/">JSON Schema</a></li>
</ul>

<h2 id="purpose-of-the-microservice-meta-data-repository">Purpose of the Microservice Meta Data Repository</h2>

<p>If we talk about metadata in this context, we mean the description of the domains and their corresponding Master Data Models. An Open Integration Hub Master Data Model (OMDM) describes the data of a certain domain in a depth which is sufficient enough to map and synchronize the specific data of multiple applications in that domain. The meta data delivers all the information a user or customer needs to work with data within a specific domain.</p>

<p>The domain models are specified by special workgroups. Please see the specific domain model repository for further informations on a domain and its master data model.</p>

<h2 id="basic-version">Basic Version</h2>

<h3 id="model-structure">Model Structure</h3>

<p>The service is mainly responsible for storing meta models and domains. In order to unify the meta data to describe domains and models we need a model structure for both objects.</p>

<h4 id="domain-object">Domain Object</h4>

<p>The domain object is responsible describing the domain itself. Thus, the following object structure is proposed:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">  
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"$id"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="s2">"Domain object description"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:{</span><span class="w">  
    </span><span class="nl">"id"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Unique identifier of the domain"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="mi">1</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Name of the domain"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="s2">"products"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Short description of the domain"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="s2">"This domain includes all product related models"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"owners"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"List of owners, who have access to this domain"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bffec99a43c7f3ca95b09e6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tenant"</span><span class="w">
    </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="model-object">Model Object</h4>

<p>The model object is responsible for describing the meta model and should have a reference to the superordinated domain.
Therefore, the following structure is supposed:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">  
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"$id"</span><span class="p">:</span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="s2">"Domain object description"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:{</span><span class="w">  
    </span><span class="nl">"id"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Unique identifier of the model"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="s2">"13"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domaindId"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Unique identifier of the domain the model belongs to"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="s2">"1"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Short description of the model"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="s2">"Master Data Model Products v1"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"owners"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"List of owners, who have access to this domain"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bffec99a43c7f3ca95b09e6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tenant"</span><span class="w">
    </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"model"</span><span class="p">:{</span><span class="w">  
      </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"A JSON schema of the actual model"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
        </span><span class="p">{</span><span class="w">  
          </span><span class="nl">"$schema"</span><span class="p">:</span><span class="s2">"http://json-schema.org/schema#"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"$id"</span><span class="p">:</span><span class="s2">"https://github.com/openintegrationhub/Data-and-Domain-Models/blob/master/src/main/schema/addresses/personV2.json"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"title"</span><span class="p">:</span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Describes a natural person"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"object"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"allOf"</span><span class="p">:[</span><span class="w">  
            </span><span class="p">{</span><span class="w">  
              </span><span class="nl">"$ref"</span><span class="p">:</span><span class="s2">"../oih-data-record.json"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"properties"</span><span class="p">:{</span><span class="w">  
            </span><span class="nl">"title"</span><span class="p">:{</span><span class="w">  
              </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Title of the person"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
                </span><span class="s2">"Dr."</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"salutation"</span><span class="p">:{</span><span class="w">  
              </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Salutation of the person"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
                </span><span class="s2">"Mr."</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"firstName"</span><span class="p">:{</span><span class="w">  
              </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"string"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Given name of the person"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"examples"</span><span class="p">:[</span><span class="w">  
                </span><span class="s2">"Max"</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<h3 id="interaction-with-other-services">Interaction with other Services</h3>
<p>Meta Data Repository can receive events from any service, but only directly interacts with two of them:</p>

<ul>
  <li>
    <p><a href="https://openintegrationhub.github.io/docs/Services/MessageOrientedMiddleware.html">Message Oriented Middleware</a>: It receives all events through the Message Oriented Middleware. It publishes several events for most important actions e.g. “metadata.domain.deleted”.</p>
  </li>
  <li>
    <p><a href="https://openintegrationhub.github.io/docs/Services/IdentityManagement.html">Identity Management</a>: It requires a bearer token created by the Identity Management to determine current user and check required permissions.</p>
  </li>
</ul>
:ET