I"<h1 id="transformer">Transformer</h1>
<p>As already mentioned the transformer transforms one JSON object into another. Prior to this transformation a semantic mapping has to take place where the entities of the source model are mapped against the entities of the Open Integration Hub master data model.</p>

<h2 id="table-of-contents">Table of Contents</h2>
<!-- TOC depthFrom:2 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

<ul>
  <li><a href="#table-of-contents">Table of Contents</a></li>
  <li><a href="#transformer-concept">Transformer Concept</a></li>
  <li><a href="#transformation-language">Transformation Language</a></li>
  <li><a href="#transformer-evolution">Transformer Evolution</a></li>
</ul>

<!-- /TOC -->

<h2 id="transformer-concept">Transformer Concept</h2>

<p>As can be seen in the <a href="https://github.com/openintegrationhub/Connectors/blob/master/Assets/ConnectorsV2.svg">connector overview</a> a transformer should transform data in both directions:</p>

<ol>
  <li>From <em>source model</em> to <em>Open Integration Hub master data model</em></li>
  <li>From <em>Open Integration Hub master data model</em> to <em>source model</em></li>
</ol>

<p>A transformer expects a JSON object as an input. Depending on the direction of the transformation the input either represents the structure of the proprietary data model (<em>flow direction 1</em>) or the structure of the Open Integration Hub master data model (<em>flow direction 2</em>).</p>

<p>Afterwards it transforms the incoming JSON object into another JSON object. This can also be done via a transformation language like <em>JSONata</em>.</p>

<p>Depending on the transformation direction, the transformerâ€™s output is then send either to the Open Integration Hub and is validated against a deposited JSON schema or to the corresponding adapter.</p>

<p>_Note: As the Open Integration Hub is feasible of storing different data models, it is also possible that the mapping of the source model is done against another model than the Open Integration Hub master data model.</p>

<!--An example of how an implementation with individually uploaded data models could look like is presented under the section [possible implementations](#possible-implementations)._-->

<h2 id="transformation-language">Transformation Language</h2>

<p>One way of transforming the JSON objects is the usage of a transformation language. As already mentioned one possible transformation language is JSONata as it is especially built to transform one JSON object into another.</p>

<p>For detailed information on transformation language and JSONata as well as a general example please have a look at <a href="https://github.com/openintegrationhub/Connectors/blob/master/Transformer/TransformationLanguage.md">TransformationLanguage</a></p>

<h2 id="transformer-evolution">Transformer Evolution</h2>

<p>Sometimes there is a need to change the existing data model to adjust to different requirements. In this case, a transformer needs to be adjusted/updated in order to be compatible with the newest version of the data model.</p>

<p>Some changes do not affect existing mappings/transformations and transformers can still be used (although they are not referring to the newest model version). Thus, backward compatibility is automatically given.</p>

<p>According to the <a href="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/part1-protocol/odata-v4.0-errata03-os-part1-protocol-complete.html#_Toc453752210">OData specification</a> (shortened/modified list) the following changes do not require a change within a transformer:</p>

<ul>
  <li>Adding an attribute that is nullable</li>
  <li>Adding an object to the model</li>
  <li>Adding a new complex type to the model</li>
  <li>Adding an option to an enumeration</li>
</ul>

<p>Apart from this various changes require transformer adjustments as they break existing mappings/transformations. Thus, backward compatibility is not automatically given (in case the Open Integration Hub operator does not run both model versions in parallel).</p>

<p>The following list provides an overview of changes that require a transformer adjustment:</p>

<ul>
  <li>Renaming an existing attribute</li>
  <li>Changing the type of an existing attribute</li>
  <li>Changing the properties of an existing attribute from <em>nullable</em> to <em>not nullable</em></li>
  <li>Deleting an existing attribute</li>
  <li>Renaming an existing object</li>
  <li>Deleting an existing object</li>
  <li>Adding an attribute that is not nullable</li>
</ul>

<p>If a new version of a model is created, two options exist to create a transformer that is compatible with the newest model version:</p>

<ol>
  <li>The existing transformer is adjusted/updated according to the structure of the new data model.</li>
  <li>A completely new transformer is built.</li>
</ol>
:ET