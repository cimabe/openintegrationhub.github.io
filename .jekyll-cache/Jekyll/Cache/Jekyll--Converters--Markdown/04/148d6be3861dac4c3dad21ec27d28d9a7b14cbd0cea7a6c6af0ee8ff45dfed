I"›<h1 id="service-events">Service Events</h1>

<p>Open Integration Hub services mostly communicate asynchronously and via message queues. Most services emitts and consumes several events.</p>

<p>This document is designed to list all events per service.</p>

<p>The currently used Event format provided by the Event Bus library was adopted for overall use. The schema is:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tenant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The field contents are:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">headers</code>: An object containing metadata about the event itself
    <ul>
      <li><code class="language-plaintext highlighter-rouge">serviceName</code>: The name of the spawning service. If using the event-bus module, this will be filled in automatically</li>
      <li><code class="language-plaintext highlighter-rouge">createdAt</code>: A timestamp of the eventâ€™s creation. If using the event-bus module, this will be filled in automatically.</li>
      <li><code class="language-plaintext highlighter-rouge">name</code>: The name of the event. Also doubles as its routing key.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">payload</code>: An arbitrary JSON object, containing the content of the event. Two optional fields are reserved for logging purposes:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">user</code>: The IAM-ID of a user who spawned the event</li>
      <li><code class="language-plaintext highlighter-rouge">tenant</code>: The IAM-ID of a tenant in which this event occurred</li>
    </ul>
  </li>
</ul>

<h2 id="iam">IAM</h2>

<h3 id="general-events">General Events</h3>

<ul>
  <li>
    <p>User created - iam.user.created</p>
  </li>
  <li>
    <p>User removed - iam.user.deleted</p>
  </li>
  <li>
    <p>Tenant created - iam.tenant.created</p>
  </li>
  <li>
    <p>Tenant removed - iam.tenant.deleted</p>
  </li>
</ul>

<h3 id="auditlog-events">AuditLog Events</h3>

<ul>
  <li>User:</li>
</ul>

<ol>
  <li>Created, modified, deleted, assigned/removed to/from tenant, failed login attempt</li>
  <li>e.g. iam.user.[operation]</li>
</ol>

<ul>
  <li>Tenant:</li>
</ul>

<ol>
  <li>Created, modified, deleted</li>
  <li>e.g. iam.tenant.[operation]</li>
</ol>

<ul>
  <li>Token / Roles / Permissions:</li>
</ul>

<ol>
  <li>Created, modified, deleted</li>
  <li>e.g. iam.role.[operation]</li>
</ol>

<h2 id="secret-service">Secret-Service</h2>

<h3 id="auditlog-events-1">AuditLog Events</h3>

<ul>
  <li>Secret:</li>
</ul>

<ol>
  <li>Created, deleted</li>
  <li>e.g. secret-service.secret.[operation], secret-service.auth-client.[operation]</li>
</ol>

<ul>
  <li>Access Token requested by Account:</li>
</ul>

<ol>
  <li>e.g. secret-service.token.get</li>
</ol>

<h2 id="metadata">Metadata</h2>

<h3 id="auditlog-events-2">AuditLog Events</h3>

<ul>
  <li>Domain / Schema</li>
</ul>

<ol>
  <li>Created, modified, deleted</li>
  <li>E.g. metadata.schema.[operation]</li>
</ol>

<h2 id="flow-repository">Flow Repository</h2>

<h3 id="auditlog-events-3">AuditLog Events</h3>

<ul>
  <li>flowrepo.flow.created</li>
  <li>flowrepo.flow.modified</li>
  <li>flowrepo.flow.deleted</li>
  <li>flowrepo.flow.starting</li>
  <li>flowrepo.flow.stopping</li>
</ul>

<h2 id="component-orchestrator">Component Orchestrator</h2>

<h3 id="auditlog-events-4">AuditLog Events</h3>

<ul>
  <li>flow.started</li>
  <li>flow.stopped</li>
</ul>
:ET