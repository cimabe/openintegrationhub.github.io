I"<!-- Description Guidelines

Please note:
Use the full links to reference other files or images! Relative links will not work under our theme settings settings.
-->

<!-- please choose the appropriate batch and delete/comment the others  -->
<p><img src="https://img.shields.io/badge/Status-Production-brightgreen.svg" alt="prod" /></p>

<h1 id="webhooks-"><strong>Webhooks</strong> <!-- make sure spelling is consistent with other sources and within this document --></h1>

<h2 id="introduction">Introduction</h2>

<!-- 2 sentences: what does it do and how -->
<p>Receives http calls and passes messages to execution.</p>

<!-- [API Reference](){: .btn .fs-5 .mb-4 .mb-md-0 }-->
<p><a href="https://github.com/openintegrationhub/openintegrationhub/tree/master/services/webhooks" class="btn fs-5 mb-4 mb-md-0">Implementation</a>
<a href="https://github.com/openintegrationhub/openintegrationhub/tree/master/lib/webhooks" class="btn fs-5 mb-4 mb-md-0">Service File</a></p>

<h2 id="technologies-used">Technologies used</h2>
<!-- please name and elaborate on other technologies or standards the service uses -->

<h2 id="how-it-works">How it works</h2>
<!-- describe core functionalities and underlying concepts in more detail -->

<p>It listens for incoming HTTP connections, serializes incoming data and puts it to the queue of the first node of the flow. The message is being consumed and processed by the component.</p>

<h3 id="available-endpoints">Available endpoints</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">HEAD /hook/{flowId}</code> - returns <code class="language-plaintext highlighter-rouge">200</code> if a flow is found and ready for receiving messages, otherwise <code class="language-plaintext highlighter-rouge">404</code>. This endpoint doesnâ€™t process any incoming data.</li>
  <li><code class="language-plaintext highlighter-rouge">GET /hook/{flowId}</code> - this endpoint processes incoming data. Itâ€™s possible to pass message arguments as query params and headers.</li>
  <li><code class="language-plaintext highlighter-rouge">POST /hook/{flowId}</code> - this endpoint processes incoming data. It allows to pass data in request body, headers or query params.</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>RabbitMQ</li>
  <li>MongoDB</li>
</ul>

<h2 id="how-to-build">How to build</h2>

<div class="language-docker highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build -t openintegrationhub/communication-router:latest -f Dockerfile ../../
</code></pre></div></div>

<p>or</p>

<pre><code class="language-npm">VERSION=latest npm run build:docker
</code></pre>

<h2 id="how-to-deploy">How to deploy</h2>

<p>Kubernetes descriptors for Communication Router along with the other core platform microservices can be found in the <a href="./k8s">k8s</a> directory.</p>

<h2 id="environment-variables">Environment variables</h2>

<h3 id="general">General</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LISTEN_PORT</td>
      <td>Port for HTTP interface.</td>
    </tr>
    <tr>
      <td>LOG_LEVEL</td>
      <td>Log level for logger.</td>
    </tr>
    <tr>
      <td>MONGODB_URI</td>
      <td>MongoDB connection string.</td>
    </tr>
    <tr>
      <td>PAYLOAD_SIZE_LIMIT</td>
      <td>Maximum requestâ€™s payload size that could be handled.</td>
    </tr>
    <tr>
      <td>RABBITMQ_URI</td>
      <td>RabbitMQ connection URI for the Resource Coordinator application.</td>
    </tr>
  </tbody>
</table>
:ET