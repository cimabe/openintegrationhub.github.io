<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Indentity Access Management - </title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Indentity Access Management</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="Indentity Access Management" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/Services/IdentityManagement.html" /> <meta property="og:url" content="http://localhost:4000/docs/Services/IdentityManagement.html" /> <script type="application/ld+json"> {"@type":"WebPage","url":"http://localhost:4000/docs/Services/IdentityManagement.html","headline":"Indentity Access Management","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight"></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">Home</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/docs/Services/Services.html" class="navigation-list-link">Services</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/AuditLog.html" class="navigation-list-link">Auditlog</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/ComponentOrchestrator.html" class="navigation-list-link">Component Orchestrator</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/ComponentRepository.html" class="navigation-list-link">Component Repository</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/FlowRepository.html" class="navigation-list-link">Flow Repository</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/docs/Services/IdentityManagement.html" class="navigation-list-link active">Indentity Access Management</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/MessageOrientedMiddleware.html" class="navigation-list-link">Message Oriented Middleware</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/MetaDataRepository.html" class="navigation-list-link">Meta Data Repository</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/Scheduler.html" class="navigation-list-link">Scheduler</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/SecretService.html" class="navigation-list-link">Secret Service</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/Service%20Collaboration/ServiceCollaborationOverview.html" class="navigation-list-link">Service Collaboration</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/docs/Service%20Collaboration/serviceEvents.html" class="navigation-list-link">Component Orchestrator</a></li></ul></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/Services/Services.html">Services</a></li> <li class="breadcrumb-nav-list-item"><span>Indentity Access Management</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1 id="identity-management"> <a href="#identity-management" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Identity Management </h1> <p>This document describes the evaluation of identity and access management within the Open Integration Hub.</p> <p>## Why is Identity and Access Management necessary?</p> <p>## Types of identities OIH consists of multiple services and agents with different roles and authorization. Given the fact, that we are dealing primarily with machine-to-machine interaction, we can use machine identites (aka. <code class="highlighter-rouge">Service Accounts</code>) for authentication and authorization of these machines.</p> <p>## Which entities should be managed?</p> <p>We can cluster the digital identites of OIH into three categories:</p> <ul> <li><code class="highlighter-rouge">Master</code> (e.g. administrative application which managed the OIH via REST-API)</li> <li><code class="highlighter-rouge">Connector</code></li> <li><code class="highlighter-rouge">Tenant</code></li> </ul> <p>### Master This actor has a privleged admin access to OIH and can define which Connectors should be (de)-provisioned. This actor can also define intergration flows on behalf of a tenant between two or more ISV connectors. Additionally, this system is authorized to manage identites/accounts (e.g. service accounts) for connectors, tenants, etc.</p> <p>### Connector A connector is a service which can trigger an action on behalf of the user or master, e.g. create a tenant, modify tenants customer data. This requires the connector to provide a valid access token or a valid service account containing these priveleges. The required privilges are granted by tenant account (or tenant admin) through OIH. Whenever such change occurs, the connector could send an event to OIH providing it’s access token. OIH verifies the access token and the claims.</p> <p>### Tenant and Tenant Users Each tenant and tenant users have an identity in OIH (main identity). Whenever a tenant account is created in one of the ISV systems via OIH, a new remote identity is created in OIH and linked to the main identity. This creates a relation (a graph) between the main identity and all corresponding remote identites. Tenant (or tenant admin) have access to tenant resources and can grant access to a connector via OIH to read/write to these resources. Example: tenant can grant access to an ISV connector C1 read and write access to it’s customer data and another ISV Connector C2 only read access. These access grants are required to define an integration flow of customer data from C1 to C2.</p> <p><img src="https://github.com/openintegrationhub/Microservices/blob/master/SecureAccessControl/assets/identities-linked.png" alt="Tenant Identities" /></p> <p>In a very basic scenario one could use a <code class="highlighter-rouge">Master</code> account to provision connectors, to manage tenants, etc.</p> <p>The <code class="highlighter-rouge">Master</code> account is preveleged to create a <code class="highlighter-rouge">Tenant</code> and thus a tenant identity. For any further API calls to OIH on behalf of the tenant organization (e.g. to create the tenant in one of the vendor application through a corresponding <code class="highlighter-rouge">Connector</code>) it could be favorable to use the tenant identity instead of the <code class="highlighter-rouge">Master</code> identity. This allows for authorization mechanisms by design and better means of audit logging. In case of a marketplace like <em>Basaas</em>, the <code class="highlighter-rouge">Tenant</code> and all <code class="highlighter-rouge">Tenant</code> users SSO mechanisms are managed by the marketplace. This also means, that the marketplace could store and transmit for each <code class="highlighter-rouge">Tenant</code> their specific Token/Service Account. To accomplish that, the <code class="highlighter-rouge">Master</code> system like the marketplace would also need either to store these Tokens/Service Accounts or to be able to fetch them from OIH.</p> <p>The following example workflow tries to illustrate such scenario:</p> <ul> <li>Master System uses <code class="highlighter-rouge">service account</code> to create a <code class="highlighter-rouge">tenant</code></li> <li>OIH creates <code class="highlighter-rouge">tenant</code></li> <li>Master System fetches the <code class="highlighter-rouge">tenant service account</code> and stores it for future requests</li> <li><code class="highlighter-rouge">Tenant admin</code> creates an account in the solution ACME Inc.</li> <li>Master System uses the <code class="highlighter-rouge">tenant service account</code> to create a tenant account in ACME Inc. through OIH</li> <li>OIH triggers the <code class="highlighter-rouge">Connector</code>to create the tenant in ACME Inc.</li> <li><code class="highlighter-rouge">Connector</code> creates tenant and returns it’s internal <code class="highlighter-rouge">TenantId</code></li> <li>OIH saves the new <code class="highlighter-rouge">TenantId</code> and connects it to the existing OIH tenant-id</li> </ul> <p>Following figure illustrates the services and the identities/service accounts.</p> <p><img src="https://github.com/openintegrationhub/Microservices/blob/master/SecureAccessControl/assets/identities-oih.png" alt="Service Accounts" /></p> <p>Another case of identities in use is when a <code class="highlighter-rouge">Connector</code> requires authorization for a vendor backend. Assuming an ISV named ACME Inc. has an RESTful API with OAuth 2.0 support. ACME creates a Connector. For every REST call the connector has to provide a valid access token for the associated tenant account. Given that a connector has no persistence, such tokens and other authentication/authorization mechanisms can be stored and provided from OIH. A possible workflow might be as follows:</p> <ul> <li>OIH and connector negotiate the supported authentication methods between OIH ↔ Connector ↔ ACME Backend or the OIH supports only OAuth 2.0 and requires access token for ACME</li> <li>OIH triggers a connector to create a tenant account in ACME <del>and provides an access token for this operation</del></li> <li>Connector calls ACME backend with <del>the given</del> token and creates a tenant on behalf of OIH</li> <li>ACME returns new access token for this particular tenant</li> <li>Connector transmits this tenant specific access token to OIH</li> <li>OIH saves the token and either uses it for all future calls for this particular tenant or provides means for a connector to fetch such token when needed</li> <li>Tenant admin creates an action through OIH</li> <li>OIH requests tenant consent (UI) and triggers the requested action afterwards</li> </ul> <p><img src="https://github.com/openintegrationhub/Microservices/blob/master/SecureAccessControl/assets/access-mngmt-oih-basaas-isv.png" alt="Access Mngmt OIH - Basaas - ISV" /></p> <p>There are most likely different strategies/possibilities to use identity management to perform actions on behalf of the user. Some of these actions may be:</p> <ul> <li>Modify use data, e.g. user changed her lastname</li> <li>Extract tenant data from an ISV and import that data into another ISV</li> </ul> <p>Given the fact that some ISVs may have an existing API based on OAuth, Rest with Access Control, etc. we must consider if there is a “one size fits all” solution or whether the OIH must be capable of applying different strategies, e.g. requiring user’s authorization by using her identity in context of OAuth 2.</p> <p>## Identity Resources and Identity provider</p> <p>The conceptual design of OIH allows the use of custom data models and integration flows of such data between multiple ISVs via connectors. An example of such data is customer data. In a simplified scenario without a data hub, a tenant can define which ISV should be primary or leading system for a specific data model (in this case – customer data). This could mean, that this ISV could be in theory the resource provider for customer data. This leads to an assumption, that we may not have a centralized resource provider without a data hub. Each ISV could be granted the privilege of a resource provider. Each caller trying to access such data must provide a valid access token established by the identity provider. An ISV connector may require a Resource API as part of it’s SDK to be able to access and validate tokens. <strong>TBD: conceptual design and analysis of federated identites.</strong></p> <p>## Machine-to-Machine Authentication/Authorization</p> <p>A machine-to-machine authorization is when the client makes calls to the Resource Server (i.e. the API) on its own behalf. For situations like this where there is no user interaction involved, the Client Credentials Grant is ideal. With Client Credentials Grant (defined in <a href="https://tools.ietf.org/html/rfc6749#section-4.4">RFC 6749, section 4.4</a>) a Client can directly request an access_token from the Authorization Server by using its Client Credentials (a Client Id and a Client Secret). Instead of identifying a Resource Owner, this token will represent the Client itself. See: https://auth0.com/docs/architecture-scenarios/application/server-api/part-1</p> <p>## Challenges</p> <ol> <li>Multiple Services are using the same OAuth2 Access Token. One Service uses the Refresh Token which creates a new Access Token and invalidates the previous token. How should the services handle this?</li> </ol> </div> </div> </div> </div> </body> </html>
