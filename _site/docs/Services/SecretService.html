<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Secret Service - </title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Secret Service</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="Secret Service" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/Services/SecretService.html" /> <meta property="og:url" content="http://localhost:4000/docs/Services/SecretService.html" /> <script type="application/ld+json"> {"@type":"WebPage","url":"http://localhost:4000/docs/Services/SecretService.html","headline":"Secret Service","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight"></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">Home</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/docs/Services/Services.html" class="navigation-list-link">Services</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/AuditLog.html" class="navigation-list-link">Auditlog</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/ComponentOrchestrator.html" class="navigation-list-link">Component Orchestrator</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/ComponentRepository.html" class="navigation-list-link">Component Repository</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/FlowRepository.html" class="navigation-list-link">Flow Repository</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/IdentityManagement.html" class="navigation-list-link">Indentity Access Management</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/MessageOrientedMiddleware.html" class="navigation-list-link">Message Oriented Middleware</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/MetaDataRepository.html" class="navigation-list-link">Meta Data Repository</a></li><li class="navigation-list-item "><a href="http://localhost:4000/docs/Services/Scheduler.html" class="navigation-list-link">Scheduler</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/docs/Services/SecretService.html" class="navigation-list-link active">Secret Service</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/Service%20Collaboration/ServiceCollaborationOverview.html" class="navigation-list-link">Service Collaboration</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/docs/Service%20Collaboration/serviceEvents.html" class="navigation-list-link">Component Orchestrator</a></li></ul></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/Services/Services.html">Services</a></li> <li class="breadcrumb-nav-list-item"><span>Secret Service</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1 id="introduction"> <a href="#introduction" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Introduction </h1> <p>In an environment similar to OIH different services communicate with each other but also with external cloud services. Such external services normally require some sort of authentication and authorization in order to identify the communicating party and the it’s privileges. Typically RESTful APIs tend to secure the API with API-Keys and tokens (e.g. OAuth 2.0 tokens). The usage of certificate in combination with a private certificate authority is also possible, but this document does not focus on the concept of a Public Key Infrastructure. From a security point of view, it is reasonable to store API-Keys and tokens encrypted and have strong authorization mechanisms to access them. In a multi-tenant environment – ideally using different encryption keys for each tenant. In OIH we need an appropriate storage for tenant or user specific key value pairs, whereupon the value can be an encrypted string, certificate, etc. All stored keys and tokens should be accessible via an API if a valid authorization exists.</p> <h1 id="service-implementation"> <a href="#service-implementation" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Service Implementation </h1> <p><strong>Framework Part:</strong> <a href="https://github.com/openintegrationhub/openintegrationhub/tree/master/lib/secret-service">secret-service lib</a></p> <p><strong>Reference Implementation:</strong> <a href="https://github.com/openintegrationhub/openintegrationhub/tree/master/services/secret-service">secret-service service</a></p> <h1 id="use-cases-and-requirements-in-oih"> <a href="#use-cases-and-requirements-in-oih" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Use Cases and requirements in OIH </h1> <p>When dealing with integration flows there are different scenarios when secrets are required. Here are some examples:</p> <ol> <li>Store an API-Key and use it for a specific solution in context of a specific integration flow.</li> <li>Store the access &amp; refresh tokens (OAuth 2.0) acquired through user consent.</li> <li>Allow sharing of secrets with other users/groups but limit read &amp; write access to the keys only to authorized users.</li> <li>A connector which runs in context of an integration flow created by the user/tenant must be able to receive the required keys/tokens.</li> </ol> <p>Additionally, it is essential to have a sophisticated audit logging for all operations involving these secrets.</p> <h1 id="secret-service"> <a href="#secret-service" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Secret Service </h1> <p>A dedicated service should carry out the management of keys and secrets. Keys need to have at least one owner and the ownership should be validated through OIH IAM. Additionally, the underlying vault framework should be interchangeable through an abstraction layer, thus ensuring a stable public API.</p> <p>The Secret-Service will provide a CRUD-API for keys, which can be accessed by other privileged services, e.g. flow operator or even connector, as well as the users. The API may look similar to current elastic.io credentials API <a href="https://api.elastic.io/v2/docs/#credentials">https://api.elastic.io/v2/docs/#credentials</a></p> <p>Proposal for secret structure</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59f9f2ba112f28001921f274</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">credential</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MySecret</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">attributes</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">keys</span><span class="dl">"</span><span class="p">:{</span>
      <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">sftp.company.org</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">testuser</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">testpassword</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">owners</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="dl">"</span><span class="s2">entityType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USER</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">entityId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59f747c33f1d3c001901a44e</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="dl">"</span><span class="s2">entityType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USER</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">entityId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59f747c33f1d3c001901a44f</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="dl">"</span><span class="s2">entityType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TENANT</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">entityId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59f747c33f1d3c001901a43e</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">:{}</span>
<span class="p">}</span>
</code></pre></div></div> <h1 id="access-control"> <a href="#access-control" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Access control </h1> <p>To enforce authentication and authorization, the Secret-Service service must also store the owner or owner group, e.g. secret is owned by user with id XYZ. Similar to current elastic.io model, flow and credentials can have a group (workspace in elastic.io documentation) as an owner. If each user has at least her own private group and each tenant likewise, then the credentials owner can be described as an array of groups.</p> <p><img src="Assets/credentials-relationship.png" alt="Credentials ownership" /></p> <p>Credential ownership ensures, that only users belonging to the correct group/workspace are allowed to read/modify the secrets.</p> <p>Apart from users, connectors also require access to credentials, e.g. when the user creates a flow and configures her credentials to be used in a specific flow step.</p> <p>There are two alternatives to solve this</p> <ol> <li>The service responsible for connector instantiation provides the connector with all required secrets</li> <li>Each connector receives a token with which it can fetch the secrets from Secret-Service</li> </ol> <p>With the second alternative we can make sure, that each connector has access only to specific secrets by providing them with a corresponding JWT token from IAM service. This JWT token would contain as a claim the user’s group-id. This in return allows the Secret-Service to verify that the connector accesses only the credentials it actually is authorizes to read. Still, this seems a bit over-engineered compared to the first one. The second alternative does however make sense if it combined with the feature of AccessToken Auto-Refreshing.</p> <p>As IAM currently does not have or support the concept of groups, we will implement the access control in the first phase as a tuple of entityType and entityId, e.g.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">entityType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USER</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">entityId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59f747c33f1d3c001901a44e</span><span class="dl">"</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="dl">"</span><span class="s2">entityType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TENANT</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">entityId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">59f747c33f1d3c001901a44f</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div></div> <p>and later as only a groupId, which must also exist in IAM.</p> <p>The following diagram illustrates both alternatives.</p> <p><img src="Assets/skm-2.png" alt="Passing credentials to connectors" /></p> <h1 id="flows-connectors-and-credentials"> <a href="#flows-connectors-and-credentials" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Flows, Connectors and Credentials </h1> <p>In an integration flow, each connector represented as a node, could receive it’s own JWT token containing the claims to access those credentials, which are required in this specific step. This could be accomplished for example through scheduler or flow manager, which ever is responsible for creation of connector instances and passing of environment variables to them. The connector then can fetch all required secrets from Secret-Service and provide the JWT token containing the claims. The Secret-Service validates the request and returns the secrets, if the connector is authorized to access them.</p> <p>The JWT payload could contain as less as the secret ids required for this specific integration step. The same ids could be present in the flow data payload, which the connector receives from the queue upon initialization.</p> <h1 id="summary"> <a href="#summary" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Summary </h1> <ul> <li>Service account(s) or JWT for a connector to fetch secrets</li> <li>Adapter communicates with an external application and requires user’s secret <ul> <li>Adapter either fetches the secrets itself from secrets service using it’s own service account and context (context may be the flow or flow step, and thus limit the access only to secrets of flow owner)</li> <li>or receive the secret as env vars through a superordinate priveleged service</li> </ul> </li> <li>In case of OAuth access tokens, a separate service could be used to refresh access tokens (singleton) and all services using an access token must request it from this singleton service <ul> <li>Advantage: only one token refresh, all depending connectors fetch the new access token from this service</li> </ul> </li> <li>Secrets are stored encrypted</li> <li>Access control to secrets is based on IAM authentication and authorization mechanisms</li> <li>Secret-Service has it’s own mongodb, where it stores: secret_id (secret is stored in vault, but referenced through secret_id), owner (user or tenant)</li> <li>Secret-Service can fetch and return a new access token using the refresh token it stored in vault</li> </ul> <h1 id="secrets-management-framework"> <a href="#secrets-management-framework" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Secrets management framework </h1> <p>Our research for a suitable and mature solution lead us to HashiCorp Vault, which we will be using for our prototypical implementation. Other solutions should be possible to integrate, as the Secret-Service acts also as an abstraction layer of the underlying vault framework. This allows to interchange the vault framework through other solutions, as long as the Secret-Service API persists.</p> <p>For a list of secrets managements solutions (albeit focused more on infrastructure and possible not up-to-date) please see this comparison list:</p> <p><a href="https://gist.github.com/maxvt/bb49a6c7243163b8120625fc8ae3f3cd">https://gist.github.com/maxvt/bb49a6c7243163b8120625fc8ae3f3cd</a></p> <p><a href="https://www.vaultproject.io/intro/vs/index.html">https://www.vaultproject.io/intro/vs/index.html</a></p> <h2 id="requirements"> <a href="#requirements" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Requirements </h2> <ul> <li>Strong Encryption of stored secrets</li> <li>HA capability</li> <li>An open source project with a large community and activity</li> <li>Maturity of the framework</li> <li>Good documentation</li> <li>Flexible storage choice</li> <li>Enterprise ready</li> </ul> <p>Compared to other solutions, we find that HashiCorp Vault <a href="https://www.vaultproject.io/intro/vs/index.html">fits best</a> with our requirements.</p> <h1 id="access-token-auto-refreshing"> <a href="#access-token-auto-refreshing" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Access Token Auto-Refreshing </h1> <p>In the section Access Control we mentioned an alternative where connectors fetch the secrets directly from the Secret-Service. This approach has an advantage if at some point either Secret-Service or a correlating service also manages OAuth access tokens. In practice, this means that a connector would call Secret-Service an request an access token of a specific OAuth secret. The Secret-Service can then either return the access token, if it has a valid one or fetch the access token using for example client id and client secret. If more than one connector rely on a single access token (an identical access token), then fetching and refreshing of an access token is done ideally by a singleton – in our case Secret-Service or a correlating service responsible for this types of requests.</p> </div> </div> </div> </div> </body> </html>
